<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout" xmlns:f="sap.ui.layout.form"
	displayBlock="true" controllerName="testeui5.controller.PedidoDetalhe">
	<App>
		<pages>
			<Page title="Digitação do Pedido" class="sapUiResponsivePadding" showNavButton="true" navButtonPress="onNavBack">
				<content>
					<IconTabBar id="idTopLevelIconTabBar" expanded="true" selectedKey="tab1" stretchContentHeight="true" enableTabReordering="true"
						select="onTablFilterEvent">
						<items>
							<IconTabFilter id="tabClienteStep" text="Dados Cliente" enabled="true" icon="sap-icon://hint" key="tab1">
								<ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
									<f:SimpleForm id="form0" minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="3" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Cod Cli - Cod Repres"/>
											<Input id="idCodCliente" value="" enabled="false"/>
											<Label text="Nome"/>
											<Input id="idNome" value="" enabled="false"/>
											<Label text="CNPJ"/>
											<Input id="idCNPJ" value="" enabled="false"/>
											<Label text="Endereço"/>
											<Input id="idEndereco" value="" enabled="false"/>
											<Label text="Cidade"/>
											<Input id="idCidade" value="" enabled="false"/>
											<!--<Label text="E-mail envio XML"/>-->
											<!--<Input id="idEmail" value="" enabled="false"/>-->
											<Label text="Telefone"/>
											<Input id="idFone" value="" enabled="false"/>
										</f:content>
									</f:SimpleForm>
								</ScrollContainer>
							</IconTabFilter>
							<IconTabFilter id="tabPedidoWebStep" text="Pedido Web" enabled="true" icon="sap-icon://notes" key="tab2">
								<ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" labelSpanL="4" labelSpanM="4" emptySpanL="2" emptySpanM="3" columnsL="2"
										columnsM="2" layout="ResponsiveGridLayout" title="">
										<f:content>
											<Label text="Nº Pedido"/>
											<Input id="idNumeroPedido" value="{modelAux>/NrPedCli}" enabled="false"/>
											<Label text="Situação"/>
											<Input id="idSituacao" value="{modelDadosPedido>/SituacaoPedido}" enabled="false"/>
											<Label text="Data pedido *"/>
											<Input id="idDataPedido" value="{modelDadosPedido>/DataPedido}" enabled="false" change="onChangeDataPedido"/>
											<Label text="Tipo pedido *"/>
											<Select id="idTipoPedido" forceSelection="false" items="{ path: 'tiposPedidos>/' }" showSecondaryValues="true" change="onChangeTipoPedido">
												<core:Item key="{tiposPedidos>idTipoPedido}" text="{tiposPedidos>idTipoPedido} - {tiposPedidos>descricao}"/>
											</Select>
											<Label text="Tipo negociação *"/>
											<Select id="idTipoNegociacao" forceSelection="false" items="{ path: 'tipoNegociacao>/' }" showSecondaryValues="true"
												change="onChangeTipoNegociacao">
												<core:Item key="{tipoNegociacao>idNegociacao}" text="{tipoNegociacao>idNegociacao} - {tipoNegociacao>descNegociacao}"/>
											</Select>
											<Label text="Tabela preço *"/>
											<Select id="idTabelaPreco" showSecondaryValues="false" forceSelection="false" items="{ path: 'tabPreco>/' }" change="onChangeTabelaPreco">
												<core:Item key="{tabPreco>pltyp}" text="{tabPreco>pltyp} - {tabPreco>ptext}"/>
											</Select>
											<Label text="Tipo transporte *"/>
											<Select id="idTipoTransporte" forceSelection="false" visible="false" items="{ path: 'tipoTransporte>/' }" showSecondaryValues="true"
												change="onChangeTipoTransporte">
												<core:Item key="{tipoTransporte>idTransporte}" text="{tipoTransporte>idTransporte}"/>
											</Select>
											<!--	<Label text="Data entrega *"/>-->
											<!--	<DatePicker id="idDataEntrega" class="readOnly" value="{modelDadosPedido>/DataEntrega}" displayFormat="dd/MM/yyyy" valueFormat="dd/MM/yyyy"-->
											<!--		change="onChangeDataEntrega" busyIndicatorDelay="0"/>-->
											<!--	<Label text="Local entrega *"/>-->
											<!--	<Input id="idLocalEntrega" value="{modelDadosPedido>/LocalEntrega}" enabled="false"/>-->
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm id="idFormParcelamento" minWidth="1024" maxContainerCols="2" editable="true" labelSpanL="4" labelSpanM="4" emptySpanL="2" emptySpanM="3" columnsL="2"
										columnsM="2" layout="ResponsiveGridLayout" title="Parcelamento">
										<f:content>
											<Label text="Dias da primeira parcela *"/>
											<Input id="idPrimeiraParcela" type="Number" value="{modelDadosPedido>/DiasPrimeiraParcela}"/>
											<Label text="Quantidade de parcelas *"/>
											<Input id="idQuantParcelas" type="Number" value="{modelDadosPedido>/QuantParcelas}"/>
											<Label text="Dias de intervalo entre as parcelas *"/>
											<Input id="idIntervaloParcelas" type="Number" value="{modelDadosPedido>/IntervaloParcelas}"/>
											<Label text="Existe entrada"/>
											<CheckBox id="idCheckEntrada" selected="{modelDadosPedido>/ExisteEntradaPedido}" select="onExisteEntrada"/>
											<Label text="Valor (R$)"/>
											<Input id="idValorEntrada" type="Text" value="{modelDadosPedido>/ValorEntradaPedido}" liveChange="onBloqueiaPercEntrada" visible="false"/>
											<Label text="Perc. (%)"/>
											<Input id="idPercEntrada" type="Text" value="{modelDadosPedido>/PercEntradaPedido}" liveChange="onBloqueiaValorEntrada" visible="false"/>
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" labelSpanL="4" labelSpanM="4" emptySpanL="2" emptySpanM="3" columnsL="2"
										columnsM="2" layout="ResponsiveGridLayout" title="Informações Adicionais">
										<f:content>
											<Label text="Observações para auditoria"/>
											<TextArea id="idObservacoesAuditoria" value="{modelDadosPedido>/ObservacaoAuditoriaPedido}" maxLength="100"
												change="onChangeAuditoriaObservacoes"/>
											<Label text="Observações para equipe de logística"/>
											<TextArea id="idObservacoes" value="{modelDadosPedido>/ObservacaoPedido}" maxLength="100" change="onChangeObservacoes"/>
										</f:content>
									</f:SimpleForm>
									<Toolbar>
										<ToolbarSpacer/>
										<Button id="idLiberarItens" text="Salvar" type="Accept" press="onLiberarItensPedido"/>
										<Button text="Cancelar" press="onCancelarPedido"/>
									</Toolbar>
								</ScrollContainer>
							</IconTabFilter>
							<IconTabFilter id="tabItensPedidoStep" text="Itens Pedido" enabled="false" icon="sap-icon://add" key="tab3">
								<ScrollContainer height="100%" width="100%" horizontal="true" vertical="true">
									<Toolbar id="lineItemsToolbar">
										<!--<Title id="lineItemsHeader"/>-->
										<ToolbarSpacer/>
										<Button id="idDiluirItens" icon="sap-icon://collections-insight" press="onCalculaDiluicaoItem" text="Diluir" type="Accept" enabled="false"/>
										<Button id="idInserirItemDiluicao" icon="sap-icon://waiver" press="onNovoItemDiluicao" text="Item Diluição" type="Reject"/>
										<Button id="idInserirItem" icon="sap-icon://add" press="onNovoItem" text="Item Pedido" type="Emphasized"/>
									</Toolbar>
									<Table id="table_pedidos" width="100%" items="{ path:'ItensPedidoGrid>/', sorter: { path: 'index', ascending: true }}"
										updateFinished="onListUpdateFinished" mode="Delete" delete="onDeletarItemPedido" itemPress="onEditarItemPress"
										noDataText="Nenhum item inserido" growing="true" growingThreshold="99" modeAnimationOn="true" growingTriggerText="Próximo &gt;&gt;&gt;"
										busyIndicatorDelay="0" fixedLayout="false">
										<columns>
											<Column minScreenWidth="600px" visible="true" width="20px" hAlign="Left">
												<Text text="Id"/>
											</Column>
											<Column minScreenWidth="320px" width="90px" hAlign="Left">
												<Text text="Item"/>
											</Column>
											<Column minScreenWidth="870px" demandPopin="false" width="auto" hAlign="Left">
												<Text text="Descrição"/>
											</Column>
											<!--<Column minScreenWidth="420px" demandPopin="false" hAlign="Left" vAlign="Left" width="80px">-->
											<!--	<Text text="Preço"/>-->
											<!--</Column>-->
											<Column minScreenWidth="320px" width="50px" hAlign="Left">
												<Text text="Qnt"/>
											</Column>
											<Column minScreenWidth="360px" demandPopin="true" width="70px" hAlign="Left">
												<Text text="Desc"/>
											</Column>
											<Column minScreenWidth="450px" demandPopin="false" width="100px" hAlign="Left">
												<Text text="Valor UN"/>
											</Column>
											<Column minScreenWidth="360px" demandPopin="false" width="100px" hAlign="Left">
												<Text text="Valor Total"/>
											</Column>
											<!--<Column minScreenWidth="500px" demandPopin="false" hAlign="Left" vAlign="Left" width="110px">-->
											<!--	<Text text="Comissão"/>-->
											<!--</Column>-->
											<!--<Column minScreenWidth="550px" demandPopin="false" hAlign="Left" vAlign="Left" width="110px">-->
											<!--	<Text text="Verba"/>-->
											<!--</Column>-->
											<!--<Column minScreenWidth="470px" demandPopin="false" width="60px" hAlign="Center">-->
											<!--	<Text text="Rent."/>-->
											<!--</Column>-->
										</columns>
										<items class="margins">
											<ColumnListItem type="Active">
												<customData>
													<core:CustomData key="mydata" value="{ItensPedidoGrid>tipoItem}" writeToDom="true"/>
												</customData>
												<cells>
													<Text text="{path : 'ItensPedidoGrid>index', type: 'sap.ui.model.type.Integer'}" visible="true"/>
													<Text text="{ItensPedidoGrid>matnr}"/>
													<Text text="{path: 'ItensPedidoGrid>maktx'}"/>
													<!--<Text text="R$: {ItensPedidoGrid>zzVprod}" />-->
													<Text text="{ItensPedidoGrid>zzQnt}"/>
													<!--<Text text="{ItensPedidoGrid>zzDesitem} %"/>-->
													<Text text="{ItensPedidoGrid>zzPercDescTotal} %"/>
													<Text text="R$: {ItensPedidoGrid>zzVprodDesc}"/>
													<Text text="R$: {ItensPedidoGrid>zzVprodDescTotal}"/>
													<!--<Text text="{ItensPedidoGrid>zzPercom} %" />-->
													<!--<Text text="{ItensPedidoGrid>zzPervm} %" />-->
												</cells>
											</ColumnListItem>
										</items>
									</Table>
								</ScrollContainer>
							</IconTabFilter>
							<IconTabFilter id="tabBalancoVerbaStep" text="Balanço Verbas" enabled="false" icon="sap-icon://waiver" key="tab5">
								<ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Balanço dos Excedentes">
										<f:content>
											<Label text="Valor excedente desconto" class="bold"/>
											<Input id="idExcedenteDesconto" value="R$: {modelDadosPedido>/ValTotalExcedenteDesconto}" class="desabilitado marginBottomInpu" enabled="false"/>
											<Label text="Verba de Marketing (R$)"/>
											<Input id="idVerbaUtilizadaDesconto" value="{modelDadosPedido>/ValVerbaUtilizadaDesconto}" liveChange="onValidaVerbaUtilizadaDesconto" enabled="true" />
											<Label text="Comissão (R$)"/>
											<Input id="idComissaoUtilizadaDesconto" value="{modelDadosPedido>/ValComissaoUtilizadaDesconto}" liveChange="onValidaComissaoUtilizadaDesconto" enabled="true" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" >
										<f:content>
											<Label text="Valor excedente prazo médio" class="bold"/>
											<Input id="idExcedentePrazo" value="R$: {modelDadosPedido>/ValTotalExcedentePrazoMed}" enabled="false" class="desabilitado"/>
											<!--<Label text="Verba de Marketing"/>-->
											<!--<Input id="idVerbaPrazo" enabled="true" type="Number" />-->
											<Label text="Comissão (R$)"/>
											<Input id="idComissaoUtilizadaPrazo" value="{modelDadosPedido>/ValUtilizadoComissaoPrazoMed}" liveChange="onValidaComissaoUtilizadaPrazoMedio" enabled="true" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Valor excedente brinde" class="bold"/>
											<Input id="idExcedenteBrinde" value="R$: {modelDadosPedido>/ValTotalExcedenteBrinde}" enabled="false" class="desabilitado"/>
											<Label text="Verba de Marketing (R$)"/>
											<Input id="idVerbaUtilizadaBrinde" value="{modelDadosPedido>/ValUtilizadoVerbaBrinde}" enabled="true" type="Number" />
											<Label text="Comissão (R$)"/>
											<Input id="idComissaoUtilizadaBrinde" value="{modelDadosPedido>/ValUtilizadoComissaoBrinde}" liveChange="onValidaComissaoUtilizadaPrazoMedio" enabled="true" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Valor excedente amostra" class="bold"/>
											<Input id="idExcedenteAmostra" value="R$: {modelDadosPedido>/ValTotalExcedenteAmostra}" enabled="false" class="desabilitado"/>
											<Label text="Verba de Marketing (R$)"/>
											<Input id="idVerbaUtilizadaAmostra" value="{modelDadosPedido>/ValUtilizadoVerbaAmostra}" enabled="true" type="Number" />
											<Label text="Comissão (R$)"/>
											<Input id="idComissaoUtilizadaAmostra" value="{modelDadosPedido>/ValUtilizadoComissaoAmostra}" liveChange="onValidaComissaoUtilizadaPrazoMedio" enabled="true" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Valor excedente bonificação" class="bold"/>
											<Input id="idExcedenteBonif" value="R$: {modelDadosPedido>/ValTotalExcedenteBonif}" enabled="false" class="desabilitado"/>
											<Label text="Verba de Marketing (R$)"/>
											<Input id="idVerbaUtilizadaBonif" value="{modelDadosPedido>/ValUtilizadoVerbaBonif}" enabled="true" type="Number" />
											<Label text="Comissão (R$)"/>
											<Input id="idComissaoUtilizadaBonif" value="{modelDadosPedido>/ValUtilizadoComissaoBonif}" liveChange="onValidaComissaoUtilizadaPrazoMedio" enabled="true" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Campanhas">
										<f:content>
											<Label text="Valor campanha enxoval" class="bold"/>
											<Input id="idValorTotalEnxoval" value="R$: {modelDadosPedido>/ValTotalCampEnxoval}" enabled="false" class="desabilitado"/>
											<Label text="Valor a ser utilizado (R$)"/>
											<Input id="idVerbaEnxoval" enabled="true" value="{modelDadosPedido>/ValUtilizadoCampEnxoval}" />
										</f:content>
									</f:SimpleForm>
									
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Valor campanha produto acabado" class="bold"/>
											<Input id="idValTotCampProdutoAcabado" value="R$: {modelDadosPedido>/ValTotalCampProdutoAcabado}" enabled="false" class="desabilitado"/>
											<Label text="Valor a ser utilizado (R$)"/>
											<Input id="idValCampProdAcabado" enabled="true" value="{modelDadosPedido>/ValUtilizadoCampProdutoAcabado}"/>
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2">
										<f:content>
											<Label text="Valor campanha global" class="bold"/>
											<Input id="idValTotCampGlobal" value="R$: {modelDadosPedido>/ValTotalCampGlobal}" enabled="false" class="desabilitado"/>
											<Label text="Valor a ser utilizado (R$)"/>
											<Input id="idValCampGlobal" enabled="true" value="{modelDadosPedido>/ValUtilizadoCampGlobal}"/>
										</f:content>
									</f:SimpleForm>
									<Toolbar>
										<ToolbarSpacer/>
										<Button id="idTransferirVerbas" text="Aplicar Balanço" type="Accept" press="onInicioBalancoVerbas"/>
									</Toolbar>
								</ScrollContainer>
							</IconTabFilter>
							<IconTabFilter id="tabTotalStep" text="Total Pedido" enabled="false" icon="sap-icon://expense-report" key="tab6">
								<ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Dados Gerais">
										<f:content>
											<Label text="Total Pedido"/>
											<Input id="idTotalPedidoAbaTotal" value="R$ {modelDadosPedido>/ValTotPed}" enabled="false" class="desabilitado"/>
											<Label text="Total Itens"/>
											<Input id="idTotalItensAbaTotal" value="{modelDadosPedido>/TotalItensPedido}" enabled="false" class="desabilitado"/>
											<Label text="Peso Total dos Itens"/>
											<Input id="idPesoPedidoAbaTotal" value="{modelDadosPedido>/Ntgew} KG" enabled="false" class="desabilitado"/>
											<Label text="Verba Pedido "/>
											<Input id="idVerbaAbaTotal" value="R$ {modelDadosPedido>/ValVerbaPedido}" enabled="false" class="desabilitado"/>
											<Label text="Comissão "/>
											<Input id="idComissaoAbaTotal" value="R$ {modelDadosPedido>/ValComissaoPedido}" enabled="false" class="desabilitado"/>
											<Label text="Parcela "/>
											<Input id="idParcela" value="{modelDadosPedido>/ValParcelasPedido}" enabled="false" class="desabilitado"/>
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Valores Excedentes">
										<f:content>
											<Label text="Valor Excedente por Descontos"/>
											<Input id="idExcedenteDescontoAbaTotal" value="R$ {modelDadosPedido>/ValTotalExcedenteDesconto}" enabled="false" class="desabilitado"/>
											<Label text="Valor Excedente por Prazo"/>
											<Input id="idExcedentePrazoAbaTotal" value="R$ {modelDadosPedido>/ValTotalExcedentePrazoMed}" enabled="false" class="desabilitado"/>
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Valores a Descontar">
										<f:content>
											<Label text="Valor abater verba "/>
											<Input id="idAbaterVerba" value="R$ {modelDadosPedido>/ValTotalAbatidoVerba}" enabled="false" class="desabilitado"/>
											<Label text="Valor abater comissão "/>
											<Input id="idAbaterComissao" value="R$ {modelDadosPedido>/ValTotalAbatidoComissao}" enabled="false" class="desabilitado"/>
											<Label text="Valor sem destinar Desconto"/>
											<Input id="idAbaterNaoDestinadoDesconto" value="R$ {modelDadosPedido>/ValTotalExcedenteNaoDirecionadoDesconto}" enabled="false" class="desabilitado"/>
											<Label text="Valor sem destinar Prazo Médio"/>
											<Input id="idAbaterNaoDestinadoPrazoMed" value="R$ {modelDadosPedido>/ValTotalExcedenteNaoDirecionadoPrazoMed}" enabled="false" class="desabilitado"/>
										</f:content>
									</f:SimpleForm>
								
									<f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4"
										emptySpanL="2" emptySpanM="2" columnsL="2" columnsM="2" title="Valores a Descontar Campanha">
										<f:content>
											<Label text="Campanha Enxoval"/>
											<Input id="idAbaterCampEnxoval" value="R$ {modelDadosPedido>/ValUtilizadoCampEnxoval}" enabled="false" class="desabilitado"/>
											<Label text="Campanha Brindes"/>
											<Input id="idAbaterCampBrinde" value="R$ {modelDadosPedido>/ValUtilizadoCampBrinde}" enabled="false" class="desabilitado"/>
											<Label text="Campanha Produto Acabado"/>
											<Input id="idAbaterProdutoAcabado" value="R$ {modelDadosPedido>/ValUtilizadoCampProdutoAcabado}" enabled="false" class="desabilitado"/>
											<!--<Label text="Campanha Global"/>-->
											<!--<Input id="idAbaterCampGlobal" value="R$ {modelDadosPedido>/ValUtilizadoCampGlobal}" enabled="false" class="desabilitado"/>-->
										</f:content>
									</f:SimpleForm>
									<Toolbar>
										<ToolbarSpacer/>
										<Label id="labelVerificacao" text="Finalize o Pedido!" class="vermelho"/>
										<Button id="idFinalizar" text="Finalizar" type="Accept" press="onFinalizarPedido"/>
										<Button id="idCancelarPedido" text="Cancelar" press="onCancelarPedido"/>
									</Toolbar>
								</ScrollContainer>
							</IconTabFilter>
						</items>
					</IconTabBar>
				</content>
			</Page>
		</pages>
	</App>
</mvc:View>